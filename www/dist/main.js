var D=function(){if(X===null||X.byteLength===0)X=new Uint8Array(K.memory.buffer);return X},T=function(k,B){return k=k>>>0,A.decode(D().subarray(k,k+B))},Z=function(k){return()=>{throw new Error(`${k} is not defined`)}};async function b(k,B){if(typeof Response==="function"&&k instanceof Response){if(typeof WebAssembly.instantiateStreaming==="function")try{return await WebAssembly.instantiateStreaming(k,B)}catch(Q){if(k.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",Q);else throw Q}const J=await k.arrayBuffer();return await WebAssembly.instantiate(J,B)}else{const J=await WebAssembly.instantiate(k,B);if(J instanceof WebAssembly.Instance)return{instance:J,module:k};else return J}}var S=function(){const k={};return k.wbg={},k.wbg.__wbg_random_9f310ce86e57ad05=typeof Math.random=="function"?Math.random:Z("Math.random"),k.wbg.__wbindgen_throw=function(B,J){throw new Error(T(B,J))},k},C=function(k,B){},H=function(k,B){return K=k.exports,j.__wbindgen_wasm_module=B,X=null,K};async function j(k){if(K!==void 0)return K;if(typeof k==="undefined")k=new URL("conway_life_bg.wasm",import.meta.url);const B=S();if(typeof k==="string"||typeof Request==="function"&&k instanceof Request||typeof URL==="function"&&k instanceof URL)k=fetch(k);C(B);const{instance:J,module:Q}=await b(await k,B);return H(J,Q)}var K,A=typeof TextDecoder!=="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};if(typeof TextDecoder!=="undefined")A.decode();var X=null,R=Object.freeze({Dead:0,"0":"Dead",Alive:1,"1":"Alive"});class Y{static __wrap(k){k=k>>>0;const B=Object.create(Y.prototype);return B.__wbg_ptr=k,B}__destroy_into_raw(){const k=this.__wbg_ptr;return this.__wbg_ptr=0,k}free(){const k=this.__destroy_into_raw();K.__wbg_universe_free(k)}get_index(k,B){return K.universe_get_index(this.__wbg_ptr,k,B)>>>0}tick(){K.universe_tick(this.__wbg_ptr)}static new(k,B){const J=K.universe_new(k,B);return Y.__wrap(J)}sprincle(k){K.universe_sprincle(this.__wbg_ptr,k)}cells(){return K.universe_cells(this.__wbg_ptr)>>>0}age(){return K.universe_age(this.__wbg_ptr)>>>0}}var G=j;var N=5,v="#000000",y="#ED1C24",V=Math.floor(window.innerWidth/N),q=Math.floor(window.innerHeight/N);G().then((k)=>{const B=Y.new(V,q),J=V,Q=q,f=document.getElementById("universe-canvas");f.height=N*q,f.width=N*V;const $=f.getContext("2d"),O=()=>{const x=B.cells(),W=new Uint8Array(k.memory.buffer,x,J*Q);$.beginPath();for(let F=0;F<Q;F++)for(let P=0;P<V;P++){const M=B.get_index(F,P);$.fillStyle=W[M]===R.Dead?v:y,$.fillRect(P*N+1,F*N+1,N,N)}$.stroke()},z=()=>{B.tick(),document.getElementById("universe-info").innerText="age: "+B.age(),O(),setTimeout(()=>requestAnimationFrame(z),50)};requestAnimationFrame(z)});
