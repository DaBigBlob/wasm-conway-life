var D=function(){if(X===null||X.byteLength===0)X=new Uint8Array(K.memory.buffer);return X},T=function(k,B){return k=k>>>0,R.decode(D().subarray(k,k+B))},Z=function(k){return()=>{throw new Error(`${k} is not defined`)}};async function b(k,B){if(typeof Response==="function"&&k instanceof Response){if(typeof WebAssembly.instantiateStreaming==="function")try{return await WebAssembly.instantiateStreaming(k,B)}catch(Q){if(k.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",Q);else throw Q}const J=await k.arrayBuffer();return await WebAssembly.instantiate(J,B)}else{const J=await WebAssembly.instantiate(k,B);if(J instanceof WebAssembly.Instance)return{instance:J,module:k};else return J}}var C=function(){const k={};return k.wbg={},k.wbg.__wbg_random_9f310ce86e57ad05=typeof Math.random=="function"?Math.random:Z("Math.random"),k.wbg.__wbindgen_throw=function(B,J){throw new Error(T(B,J))},k},H=function(k,B){},S=function(k,B){return K=k.exports,j.__wbindgen_wasm_module=B,X=null,K};async function j(k){if(K!==void 0)return K;if(typeof k==="undefined")k=new URL("conway_life_bg.wasm",import.meta.url);const B=C();if(typeof k==="string"||typeof Request==="function"&&k instanceof Request||typeof URL==="function"&&k instanceof URL)k=fetch(k);H(B);const{instance:J,module:Q}=await b(await k,B);return S(J,Q)}var K,R=typeof TextDecoder!=="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};if(typeof TextDecoder!=="undefined")R.decode();var X=null,f=Object.freeze({Dead:0,"0":"Dead",Alive:1,"1":"Alive"});class Y{static __wrap(k){k=k>>>0;const B=Object.create(Y.prototype);return B.__wbg_ptr=k,B}__destroy_into_raw(){const k=this.__wbg_ptr;return this.__wbg_ptr=0,k}free(){const k=this.__destroy_into_raw();K.__wbg_universe_free(k)}get_index(k,B){return K.universe_get_index(this.__wbg_ptr,k,B)>>>0}tick(){K.universe_tick(this.__wbg_ptr)}static new(k,B){const J=K.universe_new(k,B);return Y.__wrap(J)}sprincle(k){K.universe_sprincle(this.__wbg_ptr,k)}cells(){return K.universe_cells(this.__wbg_ptr)>>>0}age(){return K.universe_age(this.__wbg_ptr)>>>0}}var G=j;var N=5,y="#000000",v="#ED1C24",P=Math.floor(window.innerWidth/N),q=Math.floor(window.innerHeight/N);G().then((k)=>{const B=Y.new(P,q),J=P,Q=q,V=document.getElementById("game-of-life-canvas");V.height=N*q,V.width=N*P;const $=V.getContext("2d"),O=()=>{const W=B.cells(),x=new Uint8Array(k.memory.buffer,W,J*Q);$.beginPath();for(let A=0;A<Q;A++)for(let F=0;F<P;F++){const M=B.get_index(A,F);$.fillStyle=x[M]===f.Dead?y:v,$.fillRect(F*N+1,A*N+1,N,N)}$.stroke()},z=()=>{if(B.tick(),B.age()%100==0)B.sprincle(1);console.log(B.age()),O(),setTimeout(()=>requestAnimationFrame(z),50)};requestAnimationFrame(z)});
