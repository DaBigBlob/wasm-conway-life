var D=function(){if(Q===null||Q.byteLength===0)Q=new Uint8Array(J.memory.buffer);return Q},Z=function(q,k){return q=q>>>0,R.decode(D().subarray(q,q+k))},S=function(q){return()=>{throw new Error(`${q} is not defined`)}};async function T(q,k){if(typeof Response==="function"&&q instanceof Response){if(typeof WebAssembly.instantiateStreaming==="function")try{return await WebAssembly.instantiateStreaming(q,k)}catch(N){if(q.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",N);else throw N}const B=await q.arrayBuffer();return await WebAssembly.instantiate(B,k)}else{const B=await WebAssembly.instantiate(q,k);if(B instanceof WebAssembly.Instance)return{instance:B,module:q};else return B}}var v=function(){const q={};return q.wbg={},q.wbg.__wbg_random_9f310ce86e57ad05=typeof Math.random=="function"?Math.random:S("Math.random"),q.wbg.__wbindgen_throw=function(k,B){throw new Error(Z(k,B))},q},y=function(q,k){},C=function(q,k){return J=q.exports,j.__wbindgen_wasm_module=k,Q=null,J};async function j(q){if(J!==void 0)return J;if(typeof q==="undefined")q=new URL("conway_life_bg.wasm",import.meta.url);const k=v();if(typeof q==="string"||typeof Request==="function"&&q instanceof Request||typeof URL==="function"&&q instanceof URL)q=fetch(q);y(k);const{instance:B,module:N}=await T(await q,k);return C(B,N)}var J,R=typeof TextDecoder!=="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};if(typeof TextDecoder!=="undefined")R.decode();var Q=null,f=Object.freeze({Dead:0,"0":"Dead",Alive:1,"1":"Alive"});class X{static __wrap(q){q=q>>>0;const k=Object.create(X.prototype);return k.__wbg_ptr=q,k}__destroy_into_raw(){const q=this.__wbg_ptr;return this.__wbg_ptr=0,q}free(){const q=this.__destroy_into_raw();J.__wbg_universe_free(q)}get_index(q,k){return J.universe_get_index(this.__wbg_ptr,q,k)>>>0}tick(){J.universe_tick(this.__wbg_ptr)}static new(q,k){const B=J.universe_new(q,k);return X.__wrap(B)}cells(){return J.universe_cells(this.__wbg_ptr)>>>0}}var G=j;var O=(q,k)=>{if(!k)return q;return O(k,q%k)},K=O(window.innerWidth,window.innerHeight)*7,b="#000000",I="#ED1C24",F=Math.floor(window.innerWidth/K),V=Math.floor(window.innerHeight/K);G().then((q)=>{const k=X.new(F,V),B=F,N=V,P=document.getElementById("game-of-life-canvas");P.height=K*V,P.width=K*F;const Y=P.getContext("2d"),H=()=>{const W=k.cells(),M=new Uint8Array(q.memory.buffer,W,B*N);Y.beginPath();for(let $=0;$<N;$++)for(let A=0;A<F;A++){const x=k.get_index($,A);Y.fillStyle=M[x]===f.Dead?b:I,Y.fillRect(A*K+1,$*K+1,K,K)}Y.stroke()},z=()=>{k.tick(),console.log("tick"),H(),setTimeout(()=>requestAnimationFrame(z),50)};requestAnimationFrame(z)});
